<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <title>IxI Jump</title>

    <link rel="stylesheet" href="css/styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="wrap" id="gameWrap">
      <!-- Neon icon sprite (hidden) -->
      <svg
        aria-hidden="true"
        style="position: absolute; width: 0; height: 0; overflow: hidden"
      >
        <defs>
          <!-- Flame -->
          <symbol id="i-flame" viewBox="0 0 24 24">
            <!-- outer flame -->
            <path
              d="M12 2
           C 8.5 6, 6 9, 6 12
           a6 6 0 0 0 12 0
           c0-3-1.4-6-6-10z"
              fill="none"
            />
            <!-- inner flame -->
            <path
              d="M12 8
           C 10.5 9.7, 9 11, 9 13
           a3 3 0 0 0 6 0
           c0-2-1-3.3-3-5z"
              fill="none"
            />
          </symbol>

          <!-- Gate (solid neon) -->
          <symbol id="i-gate" viewBox="0 0 24 24">
            <rect
              x="5"
              y="3"
              width="14"
              height="18"
              rx="3"
              ry="3"
              fill="currentColor"
            />
          </symbol>

          <!-- IXI interlocking rings  -->
          <symbol id="i-ixi" viewBox="0 0 24 24">
            <!-- left ring -->
            <circle cx="9" cy="12" r="5" fill="none" />
            <!-- right ring -->
            <circle cx="15" cy="12" r="5" fill="none" />
          </symbol>

          <!-- Flag -->
          <symbol id="i-flag" viewBox="0 0 24 24">
            <path d="M5 21V5m0 0h9l-1.5 2L17 9H5" fill="none" />
          </symbol>
        </defs>
      </svg>

      <canvas id="game"></canvas>

      <!-- Close / Back to Spixi -->
      <button
        id="spixi-close"
        aria-label="Close mini app"
        title="Close"
        class="close-btn"
        type="button"
        onclick="SpixiAppSdk.back();"
      >
        âœ•
      </button>

      <div class="hud">
        <div class="row space-between">
          <div class="chip" id="score">Score: 0</div>
          <div class="chip" id="best">Best: 0</div>
        </div>
      </div>

      <div class="overlay native" id="menu">
        <div class="native-hero">
          <div class="native-logo">
            <span class="logo-dot"></span>
            <span>IXI MINIGAME</span>
          </div>
          <h1 class="native-title">IXIJUMP</h1>
          <p class="native-tagline">
            Hold to thrust. Weave the gates. Grab IXI.
          </p>
        </div>

        <div class="sheet">
          <div class="sheet-grabber" aria-hidden="true"></div>
          <div class="sheet-content">
            <button class="btn-primary" id="startBtn">Start</button>
            <button class="btn-ghost" id="howBtn">How to play</button>
          </div>
        </div>
      </div>

      <div class="overlay native" id="how" style="display: none">
        <div class="native-hero small">
          <h2 class="native-title">How to play</h2>
          <p class="native-tagline">Master the thrust. Thread the gates.</p>
        </div>

        <div class="sheet">
          <div class="sheet-grabber" aria-hidden="true"></div>
          <div class="sheet-content">
            <ol class="steps">
              <li>
                <div class="step-icon">
                  <svg class="icon"><use href="#i-flame" /></svg>
                </div>
                <div class="step-text">
                  <strong>Hold to lift</strong><br /><span
                    >Release to fall with gravity.</span
                  >
                </div>
              </li>
              <li>
                <div class="step-icon">
                  <svg class="icon"><use href="#i-gate" /></svg>
                </div>
                <div class="step-text">
                  <strong>Weave the gates</strong><br /><span
                    >Avoid the pillars and top laser.</span
                  >
                </div>
              </li>
              <li>
                <div class="step-icon">
                  <svg class="icon"><use href="#i-ixi" /></svg>
                </div>
                <div class="step-text">
                  <strong>Collect IXI</strong><br /><span
                    >+3 points. Shields save one hit.</span
                  >
                </div>
              </li>
              <li>
                <div class="step-icon">
                  <svg class="icon"><use href="#i-flag" /></svg>
                </div>
                <div class="step-text">
                  <strong>Beat your Best</strong><br /><span
                    >Score is shown in the HUD.</span
                  >
                </div>
              </li>
            </ol>

            <button class="btn-primary" id="backBtn">Got it</button>
          </div>
        </div>
      </div>

      <div class="overlay native" id="gameover" style="display: none">
        <div class="native-hero small">
          <h2 class="native-title">Game Over</h2>
          <p class="native-tagline" id="go-sub">Nice flying.</p>
        </div>

        <div class="sheet">
          <div class="sheet-grabber" aria-hidden="true"></div>
          <div class="sheet-content">
            <div class="metrics">
              <div class="metric">
                <div class="metric-label">Score</div>
                <div class="metric-value" id="finalScore">0</div>
              </div>
              <div class="metric">
                <div class="metric-label">Best</div>
                <div class="metric-value" id="finalBest">0</div>
              </div>
              <div class="metric">
                <div class="metric-label">Coins</div>
                <div class="metric-value" id="finalCoins">0</div>
              </div>
            </div>

            <button class="btn-primary" id="retryBtn">Retry</button>
            <button class="btn-ghost" id="menuBtn">Menu</button>
          </div>
        </div>
      </div>
    </div>

    <div class="ixijump-banner" aria-hidden="true">
      <span class="ixijump-word">IXIJUMP</span>
    </div>

    <script src="js/script.js"></script>
    <script src="js/spixi-app-sdk.js"></script>
  </body>
</html>
